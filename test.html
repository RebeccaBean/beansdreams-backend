<!DOCTYPE html>
<html>
<head>
  <title>PayPal Test</title>
  <!-- Replace with your actual sandbox client ID -->
  <script src="https://www.paypal.com/sdk/js?client-id=AWsvgf81HHTL1hMZJTfdznzTgRkAPZkdreGjZL3EYSVP-qJ2kRyb70SmFVP_DnlYw7KoNQoeSk7E8wE2"></script>
</head>
<body>
  <h1>PayPal Checkout Test</h1>
  <div id="paypal-button-container"></div>

  <script>
    paypal.Buttons({
      createOrder: async () => {
        const res = await fetch("http://localhost:3000/create-order", { method: "POST" });
        const data = await res.json();
        console.log("Order created:", data);
        return data.id; // PayPal order ID
      },
      onApprove: async (data) => {
        console.log("Order approved:", data);
        const res = await fetch("http://localhost:3000/capture-order", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ orderID: data.orderID })
        });
        const details = await res.json();
        console.log("Capture result:", details);
        alert("Transaction completed: " + details.status);
      },
      onError: (err) => {
        console.error("PayPal button error:", err);
        alert("Checkout failed: " + err);
      }
    }).render("#paypal-button-container");
  </script>
</body>
</html>
